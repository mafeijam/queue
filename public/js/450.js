"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[450],{617:(e,t,l)=>{l.d(t,{hh:()=>a,LO:()=>o,dg:()=>n,Mo:()=>r,b_:()=>i,Y0:()=>c,lo:()=>s});var a=function(e,t){var l;return void 0===e[t]||null===(null===(l=e[t])||void 0===l?void 0:l.available)?"-":"".concat(t).concat(e[t].available)},o=function(e,t){var l;return void 0===e[t]||null===(null===(l=e[t])||void 0===l?void 0:l.waiting)?"-":"".concat(t).concat(e[t].waiting)},n=function(e,t){var l;return void 0===e[t]||null===(null===(l=e[t])||void 0===l?void 0:l.details)?[]:e[t].details},r=function(e,t){var l;return void 0===e[t]||null===(null===(l=e[t])||void 0===l?void 0:l.details)},i=function(e,t){var l;return void 0===e[t]||null===(null===(l=e[t])||void 0===l?void 0:l.waiting)||e[t].waiting===e[t].available},c=function(e,t,l){var a;return void 0!==e[t]&&null!==(null===(a=e[t])||void 0===a?void 0:a.available)&&e[t].available===l},s=function(e,t){var l;return void 0===e[t]||null===(null===(l=e[t])||void 0===l?void 0:l.details)?"-":e[t].details[e[t].details.length-1].updated_at}},8450:(e,t,l)=>{l.r(t),l.d(t,{default:()=>ae});var a=l(5166),o={class:"shadow-1"},n=(0,a.createElementVNode)("thead",null,[(0,a.createElementVNode)("tr",{class:"text-grey-8"},[(0,a.createElementVNode)("th",{class:"text-left",width:"20%"},"票號"),(0,a.createElementVNode)("th",{class:"text-right",width:"40%"},"取票時間"),(0,a.createElementVNode)("th",{class:"text-right",width:"40%"},"入坐時間")])],-1),r={class:"text-left"},i={class:"text-right"},c={class:"text-right"},s={class:"q-gutter-lg"},d={class:"flex justify-between"},u=(0,a.createElementVNode)("div",{class:"text-h4 text-teal"},"電子排隊系統",-1),g={class:"flex"},v=(0,a.createElementVNode)("div",{class:"text-h6 text-grey-7 q-mr-lg"},"店舖名稱",-1),m={class:"text-h6 text-indigo-7"},x={class:"text-right"},p={class:"row q-col-gutter-lg text-subtitle1"},h={class:"col-3 text-center"},N={class:"q-pa-sm bg-red-1"},f={class:"text-right"},V={class:"q-pa-lg bg-red-1"},b=(0,a.createElementVNode)("div",{class:"text-h5 text-weight-bold text-red-8 q-mb-lg"},"A 1 ~ 2人",-1),w=(0,a.createElementVNode)("div",{class:"text-h6 text-grey-7"},"最新入座票號",-1),q={class:"text-h3 text-grey-9"},E=(0,a.createElementVNode)("div",{class:"text-h6 text-grey-7"},"最新獲取票號",-1),y={class:"text-h3 text-grey-9"},D={class:"col-3 text-center"},k={class:"q-pa-sm bg-green-1"},C={class:"text-right"},_={class:"q-pa-lg bg-green-1"},S=(0,a.createElementVNode)("div",{class:"text-h5 text-weight-bold text-green-8 q-mb-lg"},"B 3 ~ 4人",-1),B=(0,a.createElementVNode)("div",{class:"text-h6 text-grey-7"},"最新入座票號",-1),A={class:"text-h3 text-grey-9"},T=(0,a.createElementVNode)("div",{class:"text-h6 text-grey-7"},"最新獲取票號",-1),j={class:"text-h3 text-grey-9"},M={class:"col-3 text-center"},O={class:"q-pa-sm bg-blue-1"},z={class:"text-right"},$={class:"q-pa-lg bg-blue-1"},W=(0,a.createElementVNode)("div",{class:"text-h5 text-weight-bold text-blue-8 q-mb-lg"},"C 5 ~ 6人",-1),I=(0,a.createElementVNode)("div",{class:"text-h6 text-grey-7"},"最新入座票號",-1),F={class:"text-h3 text-grey-9"},L=(0,a.createElementVNode)("div",{class:"text-h6 text-grey-7"},"最新獲取票號",-1),P={class:"text-h3 text-grey-9"},Q={class:"col-3 text-center"},H={class:"q-pa-sm bg-yellow-1"},U={class:"text-right"},Y={class:"q-pa-lg bg-yellow-1"},G=(0,a.createElementVNode)("div",{class:"text-h5 text-weight-bold text-yellow-8 q-mb-lg"},"D 7人或以上",-1),J=(0,a.createElementVNode)("div",{class:"text-h6 text-grey-7"},"最新入座票號",-1),K={class:"text-h3 text-grey-9"},R=(0,a.createElementVNode)("div",{class:"text-h6 text-grey-7"},"最新獲取票號",-1),X={class:"text-h3 text-grey-9"};var Z=l(617),ee=l(9680),te=l(9828);const le={props:{shop:Object,queues:Object},setup:function(e,t){(0,t.expose)();var l=e,o=(0,a.ref)(!1),n=(0,a.ref)(null),r=(0,a.ref)(null),i=(0,a.computed)((function(){return null===r.value?l.queues:r.value})),c=new Audio("https://q.jamwong.me/mixkit-happy-bells-notification-937.wav"),s=function(e){c.play(),r.value=e.queues},d=(0,te.afl)();window.Echo.channel("queue.".concat(l.shop.uuid)).listen("QueueCreated",s);var u={props:l,show:o,selected:n,queueEvent:r,queueData:i,audio:c,onEvent:s,callNext:function(e){ee.Inertia.post("/call_next",{type:e,shop:l.shop.id,uuid:l.shop.uuid},{onSuccess:function(){return r.value=null},onError:function(e){return console.log(e)}})},$q:d,reset:function(){var e,t,a;d.dialog((e={title:"系統信息",message:"將會刪除所有票號，請確認是否繼續？",class:"text-pink-6",transitionShow:"jump-down",cancel:!0,ok:{color:"text-pink-6",label:"確認",flat:!0}},t="cancel",a={color:"grey",label:"取消",flat:!0},t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e)).onOk((function(){ee.Inertia.delete("/reset/".concat(l.shop.uuid),{onSuccess:function(){return r.value=null},onError:function(e){return console.log(e)}})}))},viewMore:function(e){n.value=(0,Z.dg)(i.value,e),o.value=!0},computed:a.computed,ref:a.ref,showTicketAvailable:Z.hh,showTicketWaiting:Z.LO,showDetails:Z.dg,noDetails:Z.Mo,noNext:Z.b_,Inertia:ee.Inertia,useQuasar:te.afl};return Object.defineProperty(u,"__isScriptSetup",{enumerable:!1,value:!0}),u},render:function(e,t,l,Z,ee,te){var le=(0,a.resolveComponent)("q-space"),ae=(0,a.resolveComponent)("q-btn"),oe=(0,a.resolveComponent)("q-bar"),ne=(0,a.resolveComponent)("q-markup-table"),re=(0,a.resolveComponent)("q-card-section"),ie=(0,a.resolveComponent)("q-card"),ce=(0,a.resolveComponent)("q-dialog"),se=(0,a.resolveComponent)("q-separator"),de=(0,a.resolveComponent)("q-page"),ue=(0,a.resolveComponent)("q-page-container"),ge=(0,a.resolveComponent)("q-layout"),ve=(0,a.resolveDirective)("close-popup");return(0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,null,[(0,a.createVNode)(ce,{modelValue:Z.show,"onUpdate:modelValue":t[0]||(t[0]=function(e){return Z.show=e}),maximized:"","transition-show":"jump-down","transition-hide":"jump-up"},{default:(0,a.withCtx)((function(){return[(0,a.createVNode)(ie,null,{default:(0,a.withCtx)((function(){return[(0,a.createVNode)(oe,{class:"bg-blue-8 text-white fixed-top z-top"},{default:(0,a.withCtx)((function(){return[(0,a.createVNode)(le),(0,a.withDirectives)((0,a.createVNode)(ae,{dense:"",flat:"",icon:"close",color:"white"},null,512),[[ve]])]})),_:1}),(0,a.createVNode)(re,{style:{"max-width":"600px",margin:"auto"}},{default:(0,a.withCtx)((function(){return[(0,a.createElementVNode)("div",o,[(0,a.createVNode)(ne,{class:"q-mt-xl bg-grey-1",flat:""},{default:(0,a.withCtx)((function(){return[n,(0,a.createElementVNode)("tbody",null,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(Z.selected,(function(e){return(0,a.openBlock)(),(0,a.createElementBlock)("tr",null,[(0,a.createElementVNode)("td",r,(0,a.toDisplayString)(e.ticket_type)+(0,a.toDisplayString)(e.ticket_number),1),(0,a.createElementVNode)("td",i,(0,a.toDisplayString)(e.created_at),1),(0,a.createElementVNode)("td",c,(0,a.toDisplayString)(e.available?e.updated_at:"-"),1)])})),256))])]})),_:1})])]})),_:1})]})),_:1})]})),_:1},8,["modelValue"]),(0,a.createVNode)(ge,{view:"hHh lpr fFf"},{default:(0,a.withCtx)((function(){return[(0,a.createVNode)(ue,{class:"bg-grey-1"},{default:(0,a.withCtx)((function(){return[(0,a.createVNode)(de,{class:"flex items-center",padding:Z.$q.platform.is.desktop,style:{"max-width":"1200px",margin:"auto"}},{default:(0,a.withCtx)((function(){return[(0,a.createVNode)(ie,{class:"shadow-1 full-width",flat:Z.$q.platform.is.mobile},{default:(0,a.withCtx)((function(){return[(0,a.createVNode)(re,{class:"q-pa-lg"},{default:(0,a.withCtx)((function(){return[(0,a.createElementVNode)("div",s,[(0,a.createElementVNode)("div",d,[u,Z.$q.platform.is.desktop?((0,a.openBlock)(),(0,a.createBlock)(ae,{key:0,onClick:t[1]||(t[1]=function(e){return Z.$q.fullscreen.toggle()}),icon:Z.$q.fullscreen.isActive?"fullscreen_exit":"fullscreen",round:"",flat:"",color:"blue"},null,8,["icon"])):(0,a.createCommentVNode)("",!0)]),(0,a.createElementVNode)("div",g,[v,(0,a.createElementVNode)("div",m,(0,a.toDisplayString)(l.shop.name),1)]),(0,a.createElementVNode)("div",x,[(0,a.createVNode)(ae,{label:"重設",icon:"restart_alt",onClick:Z.reset,color:"pink"})])])]})),_:1}),(0,a.createVNode)(re,{class:"q-pt-none q-pb-lg q-px-lg"},{default:(0,a.withCtx)((function(){return[(0,a.createElementVNode)("div",p,[(0,a.createElementVNode)("div",h,[(0,a.createElementVNode)("div",N,[(0,a.createElementVNode)("div",f,[(0,a.createVNode)(ae,{label:"查閱明細",flat:"",icon:"list",dense:"",color:"red-8",onClick:t[2]||(t[2]=function(e){return Z.viewMore("A")}),disable:Z.noDetails(Z.queueData,"A")},null,8,["disable"])])]),(0,a.createElementVNode)("div",V,[b,(0,a.createVNode)(se,{spaced:"lg"}),w,(0,a.createElementVNode)("div",q,(0,a.toDisplayString)(Z.showTicketAvailable(Z.queueData,"A")),1),(0,a.createVNode)(se,{spaced:"lg"}),E,(0,a.createElementVNode)("div",y,(0,a.toDisplayString)(Z.showTicketWaiting(Z.queueData,"A")),1),(0,a.createVNode)(ae,{class:"full-width q-mt-xl",label:"下一個",color:Z.noNext(Z.queueData,"A")?"grey-5":"red",size:"lg",onClick:t[3]||(t[3]=function(e){return Z.callNext("A")}),disable:Z.noNext(Z.queueData,"A")},null,8,["color","disable"])])]),(0,a.createElementVNode)("div",D,[(0,a.createElementVNode)("div",k,[(0,a.createElementVNode)("div",C,[(0,a.createVNode)(ae,{label:"查閱明細",flat:"",icon:"list",dense:"",color:"green-8",onClick:t[4]||(t[4]=function(e){return Z.viewMore("B")}),disable:Z.noDetails(Z.queueData,"B")},null,8,["disable"])])]),(0,a.createElementVNode)("div",_,[S,(0,a.createVNode)(se,{spaced:"lg"}),B,(0,a.createElementVNode)("div",A,(0,a.toDisplayString)(Z.showTicketAvailable(Z.queueData,"B")),1),(0,a.createVNode)(se,{spaced:"lg"}),T,(0,a.createElementVNode)("div",j,(0,a.toDisplayString)(Z.showTicketWaiting(Z.queueData,"B")),1),(0,a.createVNode)(ae,{class:"full-width q-mt-xl",label:"下一個",color:Z.noNext(Z.queueData,"B")?"grey-5":"green",size:"lg",onClick:t[5]||(t[5]=function(e){return Z.callNext("B")}),disable:Z.noNext(Z.queueData,"B")},null,8,["color","disable"])])]),(0,a.createElementVNode)("div",M,[(0,a.createElementVNode)("div",O,[(0,a.createElementVNode)("div",z,[(0,a.createVNode)(ae,{label:"查閱明細",flat:"",icon:"list",dense:"",color:"blue-8",onClick:t[6]||(t[6]=function(e){return Z.viewMore("C")}),disable:Z.noDetails(Z.queueData,"C")},null,8,["disable"])])]),(0,a.createElementVNode)("div",$,[W,(0,a.createVNode)(se,{spaced:"lg"}),I,(0,a.createElementVNode)("div",F,(0,a.toDisplayString)(Z.showTicketAvailable(Z.queueData,"C")),1),(0,a.createVNode)(se,{spaced:"lg"}),L,(0,a.createElementVNode)("div",P,(0,a.toDisplayString)(Z.showTicketWaiting(Z.queueData,"C")),1),(0,a.createVNode)(ae,{class:"full-width q-mt-xl",label:"下一個",color:Z.noNext(Z.queueData,"C")?"grey-5":"blue",size:"lg",onClick:t[7]||(t[7]=function(e){return Z.callNext("C")}),disable:Z.noNext(Z.queueData,"C")},null,8,["color","disable"])])]),(0,a.createElementVNode)("div",Q,[(0,a.createElementVNode)("div",H,[(0,a.createElementVNode)("div",U,[(0,a.createVNode)(ae,{label:"查閱明細",flat:"",icon:"list",dense:"",color:"yellow-8",onClick:t[8]||(t[8]=function(e){return Z.viewMore("D")}),disable:Z.noDetails(Z.queueData,"D")},null,8,["disable"])])]),(0,a.createElementVNode)("div",Y,[G,(0,a.createVNode)(se,{spaced:"lg"}),J,(0,a.createElementVNode)("div",K,(0,a.toDisplayString)(Z.showTicketAvailable(Z.queueData,"D")),1),(0,a.createVNode)(se,{spaced:"lg"}),R,(0,a.createElementVNode)("div",X,(0,a.toDisplayString)(Z.showTicketWaiting(Z.queueData,"D")),1),(0,a.createVNode)(ae,{class:"full-width q-mt-xl",label:"下一個",color:Z.noNext(Z.queueData,"D")?"grey-5":"yellow",size:"lg",onClick:t[9]||(t[9]=function(e){return Z.callNext("D")}),disable:Z.noNext(Z.queueData,"D")},null,8,["color","disable"])])])])]})),_:1})]})),_:1},8,["flat"])]})),_:1},8,["padding"])]})),_:1})]})),_:1})],64)}},ae=le}}]);